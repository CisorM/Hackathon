import"./chunk-BYXBJQAS.js";import"./chunk-DMAP7O3B.js";import"./chunk-SEBF2BU2.js";import"./chunk-226KYS73.js";import"./chunk-5MEDV3QV.js";import"./chunk-36MGJEOV.js";import{a as L,b as B,d as I,e as q,f as V,g as k,h as j,l as A,m as z,n as G,o as Z,r as J}from"./chunk-P4DBDHMG.js";import{a as U,b as g}from"./chunk-FYQRXYID.js";import{a as H}from"./chunk-QH7CS6OP.js";import"./chunk-NMGI7OHJ.js";import{a as R}from"./chunk-6BZURQTQ.js";import{c as D}from"./chunk-R7DZLFCY.js";import{C as y,D as C,i as T,n as N}from"./chunk-7LRRDA6O.js";import{$ as b,Eb as o,Fb as F,Ib as m,Jb as s,Kb as c,Mb as O,Na as d,Oa as u,Wa as S,db as E,fb as P,ia as _,ja as h,jb as n,kb as i,lb as v,pb as w,tb as f,ub as W,yb as x}from"./chunk-LJKVXSQR.js";function Q(p,K){if(p&1){let r=w();n(0,"div")(1,"input",32),c("ngModelChange",function(t){let a=_(r).$implicit;return s(a.selected,t)||(a.selected=t),h(t)}),f("change",function(){_(r);let t=W();return h(t.updatePathologies())}),i(),n(2,"span"),o(3),i()()}if(p&2){let r=K.$implicit;d(),x("name","pathology-",r.id,""),m("ngModel",r.selected),d(2),F(r.name)}}var ue=(()=>{class p{constructor(r,l,t){this.ngZone=r,this.toastrService=l,this.router=t,this.formSchema=g.object({first_name:g.string().min(1,{message:"El nombre es obligatorio."}),last_name:g.string().min(1,{message:"El apellido es obligatorio."}),birth_date:g.string().refine(a=>new Date(a)<new Date,{message:"La fecha de nacimiento debe ser anterior a la fecha actual."}),email:g.string().email({message:"El correo electr\xF3nico no es v\xE1lido."}),id_card_prefix:g.string().min(1,{message:"El prefijo de la c\xE9dula es obligatorio."}),id_card:g.string().min(1,{message:"El n\xFAmero de c\xE9dula es obligatorio."}),phone:g.string().min(1,{message:"El tel\xE9fono es obligatorio."}),address:g.string().min(1,{message:"La direcci\xF3n es obligatoria."}),gender:g.string().min(1,{message:"El g\xE9nero es obligatorio."}),economic_status:g.string().min(1,{message:"El estado econ\xF3mico es obligatorio."}),pathology_description:g.string().min(1,{message:"La descripci\xF3n de la patolog\xEDa es obligatoria."}),vulnerability_level:g.string().min(1,{message:"El nivel de vulnerabilidad es obligatorio."})}),this.form={first_name:"",last_name:"",birth_date:"",email:"",id_card_prefix:"",id_card:"",phone:"",address:"",gender:"",economic_status:"",pathology_description:"",vulnerability_level:""},this.pathologies=[]}ngOnInit(){this.getPathologies()}getPathologies(){let{headers:r}=C();fetch(`${y.apiUrl}pathology/getAll`,{method:"GET",headers:r}).then(l=>l.json()).then(l=>{console.log(l),this.pathologies=l.data.pathologies.slice(0,5).map(t=>({id:t.id,name:t.name,selected:!1}))})}updatePathologies(){let r=this.pathologies.filter(l=>l.selected);console.log(r)}createPaciente(){let r=new Date(this.form.birth_date),l=new Date;if(isNaN(r.getTime())||r>l){this.toastrService.error("La fecha de nacimiento debe ser anterior a la fecha actual.","Alerta");return}if(isNaN(Number(this.form.id_card))){this.toastrService.error("El n\xFAmero de c\xE9dula debe ser un n\xFAmero.","Alerta");return}try{this.formSchema.parse(this.form)}catch(e){if(e instanceof U){e.errors.forEach(M=>{this.toastrService.error(`${M.message}`,"Alerta")});return}}let t={first_name:this.form.first_name,last_name:this.form.last_name,birth_date:this.form.birth_date,email:this.form.email,cedula:this.form.id_card_prefix+this.form.id_card,id_card:this.form.id_card,phone:this.form.phone,address:this.form.address,gender:this.form.gender,economic_status:this.form.economic_status,community_id:1,pathologies:this.pathologies.filter(e=>e.selected).map(e=>({id_pathology:e.id,description:this.form.pathology_description})),vulnerability_level:this.form.vulnerability_level},{headerPost:a}=C();fetch(`${y.apiUrl}patient/create`,{method:"POST",headers:a,body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{console.log(e),this.ngZone.run(()=>{this.form={first_name:"",last_name:"",birth_date:"",email:"",id_card_prefix:"V-",id_card:"",phone:"",address:"",gender:"",economic_status:"",pathology_description:"",vulnerability_level:""}}),this.router.navigate(["/gestionPaciente"])}).catch(e=>{console.error(e),this.ngZone.run(()=>{alert("Error al crear el paciente")})})}static{this.\u0275fac=function(l){return new(l||p)(u(S),u(H),u(D))}}static{this.\u0275cmp=b({type:p,selectors:[["app-form-paciente"]],standalone:!0,features:[O],decls:81,vars:13,consts:[["title","Crear Paciente"],[1,"container"],[1,"form-group"],[1,"label"],["type","text","name","first_name","placeholder","Ingrese el nombre del paciente","required","",3,"ngModelChange","ngModel"],["type","text","name","last_name","placeholder","Ingrese el apellido del paciente","required","",3,"ngModelChange","ngModel"],["type","date","name","birth_date","placeholder","Ingrese la fecha de nacimiento del paciente","required","",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Ingrese el correo electr\xF3nico del paciente","required","",3,"ngModelChange","ngModel"],[1,"id-card-input"],["id","id_card_prefix","name","id_card_prefix","required","",3,"ngModelChange","ngModel"],["value","V-"],["value","J-"],["value","G-"],["value","E-"],["id","id_card","type","text","name","id_card","placeholder","Ingrese la c\xE9dula de identidad del paciente","required","",3,"ngModelChange","ngModel"],["type","text","name","phone","placeholder","Ingrese el tel\xE9fono del paciente","required","",3,"ngModelChange","ngModel"],["type","text","name","address","placeholder","Ingrese la direcci\xF3n del paciente","required","",3,"ngModelChange","ngModel"],["name","gender","required","",3,"ngModelChange","ngModel"],["value","masculino"],["value","femenino"],["name","economic_status","required","",3,"ngModelChange","ngModel"],["value","clase alta"],["value","clase media"],["value","clase baja"],[4,"ngFor","ngForOf"],["type","text","name","pathology_description","placeholder","Ingrese la descripci\xF3n de la patolog\xEDa del paciente","required","",3,"ngModelChange","ngModel"],["name","vulnerability_level","required","",3,"ngModelChange","ngModel"],["value","muy critico"],["value","critico"],["value","medio"],["value","bajo"],["type","button",3,"click"],["type","checkbox",3,"ngModelChange","change","ngModel","name"]],template:function(l,t){l&1&&(v(0,"app-h1",0),n(1,"div",1)(2,"form")(3,"div",2)(4,"label",3),o(5,"Nombre:"),i(),n(6,"input",4),c("ngModelChange",function(e){return s(t.form.first_name,e)||(t.form.first_name=e),e}),i()(),n(7,"div",2)(8,"label",3),o(9,"Apellido:"),i(),n(10,"input",5),c("ngModelChange",function(e){return s(t.form.last_name,e)||(t.form.last_name=e),e}),i()(),n(11,"div",2)(12,"label",3),o(13,"Fecha de nacimiento:"),i(),n(14,"input",6),c("ngModelChange",function(e){return s(t.form.birth_date,e)||(t.form.birth_date=e),e}),i()(),n(15,"div",2)(16,"label",3),o(17,"Correo electr\xF3nico:"),i(),n(18,"input",7),c("ngModelChange",function(e){return s(t.form.email,e)||(t.form.email=e),e}),i()(),n(19,"div",2)(20,"label",3),o(21,"C\xE9dula de identidad:"),i(),n(22,"div",8)(23,"select",9),c("ngModelChange",function(e){return s(t.form.id_card_prefix,e)||(t.form.id_card_prefix=e),e}),n(24,"option",10),o(25,"V-"),i(),n(26,"option",11),o(27,"J-"),i(),n(28,"option",12),o(29,"G-"),i(),n(30,"option",13),o(31,"E-"),i()(),n(32,"input",14),c("ngModelChange",function(e){return s(t.form.id_card,e)||(t.form.id_card=e),e}),i()()(),n(33,"div",2)(34,"label",3),o(35,"Tel\xE9fono:"),i(),n(36,"input",15),c("ngModelChange",function(e){return s(t.form.phone,e)||(t.form.phone=e),e}),i()(),n(37,"div",2)(38,"label",3),o(39,"Direcci\xF3n:"),i(),n(40,"input",16),c("ngModelChange",function(e){return s(t.form.address,e)||(t.form.address=e),e}),i()(),n(41,"div",2)(42,"label",3),o(43,"G\xE9nero:"),i(),n(44,"select",17),c("ngModelChange",function(e){return s(t.form.gender,e)||(t.form.gender=e),e}),n(45,"option",18),o(46,"Masculino"),i(),n(47,"option",19),o(48,"Femenino"),i()()(),n(49,"div",2)(50,"label",3),o(51,"Estado econ\xF3mico:"),i(),n(52,"select",20),c("ngModelChange",function(e){return s(t.form.economic_status,e)||(t.form.economic_status=e),e}),n(53,"option",21),o(54,"Clase alta"),i(),n(55,"option",22),o(56,"Clase media"),i(),n(57,"option",23),o(58,"Clase baja"),i()()(),n(59,"div",2)(60,"label",3),o(61,"Patolog\xEDas:"),i(),E(62,Q,4,4,"div",24),i(),n(63,"div",2)(64,"label",3),o(65,"Descripci\xF3n de la patolog\xEDa:"),i(),n(66,"input",25),c("ngModelChange",function(e){return s(t.form.pathology_description,e)||(t.form.pathology_description=e),e}),i()(),n(67,"div",2)(68,"label",3),o(69,"Nivel de vulnerabilidad:"),i(),n(70,"select",26),c("ngModelChange",function(e){return s(t.form.vulnerability_level,e)||(t.form.vulnerability_level=e),e}),n(71,"option",27),o(72,"Muy cr\xEDtico"),i(),n(73,"option",28),o(74,"Cr\xEDtico"),i(),n(75,"option",29),o(76,"Medio"),i(),n(77,"option",30),o(78,"Bajo"),i()()(),n(79,"button",31),f("click",function(){return t.createPaciente()}),o(80,"Crear Paciente"),i()()()),l&2&&(d(6),m("ngModel",t.form.first_name),d(4),m("ngModel",t.form.last_name),d(4),m("ngModel",t.form.birth_date),d(4),m("ngModel",t.form.email),d(5),m("ngModel",t.form.id_card_prefix),d(9),m("ngModel",t.form.id_card),d(4),m("ngModel",t.form.phone),d(4),m("ngModel",t.form.address),d(4),m("ngModel",t.form.gender),d(8),m("ngModel",t.form.economic_status),d(10),P("ngForOf",t.pathologies),d(4),m("ngModel",t.form.pathology_description),d(4),m("ngModel",t.form.vulnerability_level))},dependencies:[N,T,R,J,j,z,G,B,L,A,I,q,Z,k,V],styles:[".container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:40px auto;padding:20px;border-radius:14px;box-shadow:0 0 10px #0000001a;background-color:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.label[_ngcontent-%COMP%]{font-size:medium;margin-bottom:10px;display:block}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid #ccc;border-radius:5px;font-size:medium}.id-card-input[_ngcontent-%COMP%]{display:flex;gap:10px}.id-card-input[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:70px;flex-shrink:0}.id-card-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1}button[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#1759b1;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:medium;transition:background-color .3s ease}button[type=button][_ngcontent-%COMP%]:hover{background-color:#0b3a77}.error-message[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:5px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{width:90%;padding:15px}}"]})}}return p})();export{ue as default};
