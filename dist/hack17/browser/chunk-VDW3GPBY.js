import"./chunk-BYXBJQAS.js";import"./chunk-DMAP7O3B.js";import"./chunk-SEBF2BU2.js";import"./chunk-226KYS73.js";import"./chunk-5MEDV3QV.js";import"./chunk-36MGJEOV.js";import{a as W,b as z,d as U,e as k,f as L,g as V,h as q,l as I,m as B,n as N,o as j,p as A,r as D}from"./chunk-P4DBDHMG.js";import{b as p}from"./chunk-FYQRXYID.js";import{a as G}from"./chunk-QH7CS6OP.js";import"./chunk-NMGI7OHJ.js";import"./chunk-6BZURQTQ.js";import"./chunk-R7DZLFCY.js";import{C as R,D as Z,j as F,n as T}from"./chunk-7LRRDA6O.js";import{$ as b,Eb as o,Ib as l,Jb as m,Kb as c,Mb as O,Na as s,Oa as y,Wa as S,a as C,b as w,db as P,fb as E,hb as M,ia as g,ja as _,jb as n,kb as t,lb as x,pb as v,tb as h,ub as f}from"./chunk-LJKVXSQR.js";function J(u,H){if(u&1){let a=v();n(0,"div",27)(1,"div",1)(2,"label",28),o(3,"Raz\xF3n Social:"),t(),n(4,"input",29),c("ngModelChange",function(e){g(a);let i=f();return m(i.form.razon_social,e)||(i.form.razon_social=e),_(e)}),t()(),n(5,"div",1)(6,"label",30),o(7,"Descripci\xF3n:"),t(),n(8,"textarea",31),c("ngModelChange",function(e){g(a);let i=f();return m(i.form.description,e)||(i.form.description=e),_(e)}),t()(),n(9,"div",32)(10,"input",33),c("ngModelChange",function(e){g(a);let i=f();return m(i.form.is_fundation,e)||(i.form.is_fundation=e),_(e)}),t(),n(11,"label",34),o(12,"\xBFEs fundaci\xF3n?"),t()()()}if(u&2){let a=f();s(4),l("ngModel",a.form.razon_social),s(4),l("ngModel",a.form.description),s(2),l("ngModel",a.form.is_fundation)}}var pe=(()=>{class u{selectUserType(a){this.form.userType=a}constructor(a,d){this.ngZone=a,this.toastrService=d,this.form={first_name:"",last_name:"",email:"",id_card_prefix:"",id_card:"",password:"",confirm_password:"",userType:"donor",razon_social:"",description:"",is_fundation:!1},this.userSchema=p.object({first_name:p.string().min(1,"El primer nombre es requerido"),last_name:p.string().min(1,"El apellido es requerido"),email:p.string().email("El correo electr\xF3nico no es v\xE1lido"),id_card_prefix:p.string().min(1,"El prefijo de la c\xE9dula es requerido"),id_card:p.string().min(1,"La c\xE9dula es requerida").regex(/^\d+$/,"La c\xE9dula debe contener solo n\xFAmeros"),password:p.string().min(6,"La contrase\xF1a debe tener al menos 6 caracteres"),confirm_password:p.string().min(6,"La confirmaci\xF3n de la contrase\xF1a debe tener al menos 6 caracteres"),razon_social:p.string().optional(),description:p.string().optional()})}createUser(){let a=this.userSchema.safeParse(w(C({},this.form),{cedula:this.form.id_card_prefix+this.form.id_card}));if(!a.success){a.error.errors.forEach(i=>{this.toastrService.error(i.message,"Error")});return}if(this.form.userType==="donor"){if(!this.form.razon_social||this.form.razon_social.trim().length===0){this.toastrService.error('La raz\xF3n social es requerida para el tipo de usuario "donor"',"Error");return}if(!this.form.description||this.form.description.trim().length===0){this.toastrService.error('La descripci\xF3n es requerida para el tipo de usuario "donor"',"Error");return}}if(this.form.password!==this.form.confirm_password){this.toastrService.error("Las contrase\xF1as no coinciden","Error");return}let d=C({first_name:this.form.first_name,last_name:this.form.last_name,email:this.form.email,cedula:this.form.id_card_prefix+this.form.id_card,password:this.form.password,userType:this.form.userType},this.form.userType==="donor"&&{razon_social:this.form.razon_social,description:this.form.description,is_fundation:this.form.is_fundation});console.log(d);let{headerPost:e}=Z();fetch(`${R.apiUrl}admin/create`,{method:"POST",headers:e,body:JSON.stringify(d)}).then(i=>i.json()).then(i=>{console.log(i),this.ngZone.run(()=>{this.toastrService.success("Usuario creado con \xE9xito","\xC9xito"),this.form={first_name:"",last_name:"",email:"",id_card:"",id_card_prefix:"V-",password:"",confirm_password:"",userType:"admin",razon_social:"",description:"",is_fundation:!1}})}).catch(i=>{console.error(i),this.ngZone.run(()=>{this.toastrService.error("Error al crear el usuario","Error")})})}static{this.\u0275fac=function(d){return new(d||u)(y(S),y(G))}}static{this.\u0275cmp=b({type:u,selectors:[["app-form-usuario"]],standalone:!0,features:[O],decls:53,vars:12,consts:[[1,"container"],[1,"form-group"],["for","first_name",1,"label"],["id","first_name","type","text","name","first_name","placeholder","Ingrese el nombre del usuario","required","",3,"ngModelChange","ngModel"],["for","last_name",1,"label"],["id","last_name","type","text","name","last_name","placeholder","Ingrese el apellido del usuario","required","",3,"ngModelChange","ngModel"],["for","id_card",1,"label"],[1,"id-card-input"],["id","id_card_prefix","name","id_card_prefix","required","",3,"ngModelChange","ngModel"],["value","V-"],["value","J-"],["value","G-"],["value","E-"],["id","id_card","type","text","maxlength","9","name","id_card","placeholder","Ingrese la c\xE9dula de identidad del usuario","required","",3,"ngModelChange","ngModel"],["for","email",1,"label"],["id","email","type","email","name","email","placeholder","Ingrese el correo electr\xF3nico del usuario","required","",3,"ngModelChange","ngModel"],["for","password",1,"label"],["id","password","type","password","name","password","placeholder","Ingrese la contrase\xF1a","required","",3,"ngModelChange","ngModel"],["for","confirm_password",1,"label"],["id","confirm_password","type","password","name","confirm_password","placeholder","Repita la contrase\xF1a","required","",3,"ngModelChange","ngModel"],[1,"label"],[1,"user-type-cards"],[1,"user-type-card",3,"click"],[1,"fas","fa-user-cog"],[1,"fas","fa-hand-holding-heart"],["class","donor-fields",4,"ngIf"],["type","button",3,"click"],[1,"donor-fields"],["for","razon_social",1,"label"],["id","razon_social","type","text","name","razon_social","placeholder","Ingrese la raz\xF3n social",3,"ngModelChange","ngModel"],["for","description",1,"label"],["id","description","name","description","placeholder","Ingrese una descripci\xF3n",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],["id","is_fundation","type","checkbox","name","is_fundation",3,"ngModelChange","ngModel"],["for","is_fundation",1,"checkbox-label"]],template:function(d,e){d&1&&(n(0,"div",0)(1,"h1"),o(2,"Crear usuario"),t(),n(3,"form")(4,"div",1)(5,"label",2),o(6,"Nombre:"),t(),n(7,"input",3),c("ngModelChange",function(r){return m(e.form.first_name,r)||(e.form.first_name=r),r}),t()(),n(8,"div",1)(9,"label",4),o(10,"Apellido:"),t(),n(11,"input",5),c("ngModelChange",function(r){return m(e.form.last_name,r)||(e.form.last_name=r),r}),t()(),n(12,"div",1)(13,"label",6),o(14,"C\xE9dula de identidad:"),t(),n(15,"div",7)(16,"select",8),c("ngModelChange",function(r){return m(e.form.id_card_prefix,r)||(e.form.id_card_prefix=r),r}),n(17,"option",9),o(18,"V-"),t(),n(19,"option",10),o(20,"J-"),t(),n(21,"option",11),o(22,"G-"),t(),n(23,"option",12),o(24,"E-"),t()(),n(25,"input",13),c("ngModelChange",function(r){return m(e.form.id_card,r)||(e.form.id_card=r),r}),t()()(),n(26,"div",1)(27,"label",14),o(28,"Correo electr\xF3nico:"),t(),n(29,"input",15),c("ngModelChange",function(r){return m(e.form.email,r)||(e.form.email=r),r}),t()(),n(30,"div",1)(31,"label",16),o(32,"Contrase\xF1a:"),t(),n(33,"input",17),c("ngModelChange",function(r){return m(e.form.password,r)||(e.form.password=r),r}),t()(),n(34,"div",1)(35,"label",18),o(36,"Repetir contrase\xF1a:"),t(),n(37,"input",19),c("ngModelChange",function(r){return m(e.form.confirm_password,r)||(e.form.confirm_password=r),r}),t()(),n(38,"div",1)(39,"label",20),o(40,"Tipo de usuario"),t(),n(41,"div",21)(42,"div",22),h("click",function(){return e.selectUserType("admin")}),x(43,"i",23),n(44,"span"),o(45,"Administrador"),t()(),n(46,"div",22),h("click",function(){return e.selectUserType("donor")}),x(47,"i",24),n(48,"span"),o(49,"Donante"),t()()()(),P(50,J,13,3,"div",25),n(51,"button",26),h("click",function(){return e.createUser()}),o(52,"Crear usuario"),t()()()),d&2&&(s(7),l("ngModel",e.form.first_name),s(4),l("ngModel",e.form.last_name),s(5),l("ngModel",e.form.id_card_prefix),s(9),l("ngModel",e.form.id_card),s(4),l("ngModel",e.form.email),s(4),l("ngModel",e.form.password),s(4),l("ngModel",e.form.confirm_password),s(5),M("selected",e.form.userType==="admin"),s(4),M("selected",e.form.userType==="donor"),s(4),E("ngIf",e.form.userType==="donor"))},dependencies:[T,F,D,q,B,N,z,W,I,U,k,j,A,V,L],styles:[".container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:40px auto;padding:20px;border-radius:14px;box-shadow:0 0 10px #0000001a;background-color:#fff}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.label[_ngcontent-%COMP%]{font-size:medium;margin-bottom:10px;display:block}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid #ccc;border-radius:5px;font-size:medium}textarea[_ngcontent-%COMP%]{min-height:100px;font-family:inherit;resize:vertical}.id-card-input[_ngcontent-%COMP%]{display:flex;gap:10px}.id-card-input[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:70px;flex-shrink:0}.id-card-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1}.user-type-cards[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.user-type-card[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;border:2px solid #ccc;border-radius:10px;cursor:pointer;transition:all .3s ease}.user-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #0000001a}.user-type-card.selected[_ngcontent-%COMP%]{border-color:#1759b1;background-color:#e6f0ff}.user-type-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px;color:#1759b1}.user-type-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:medium;text-align:center}.donor-fields[_ngcontent-%COMP%]{margin-top:20px}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center}.checkbox-label[_ngcontent-%COMP%]{margin-left:10px}button[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#1759b1;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:medium;transition:background-color .3s ease}button[type=button][_ngcontent-%COMP%]:hover{background-color:#0b3a77}.error-message[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:5px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{width:90%;padding:15px}}"]})}}return u})();export{pe as default};
