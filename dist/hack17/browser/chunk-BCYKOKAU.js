import"./chunk-BYXBJQAS.js";import{a as y,b as E}from"./chunk-YHSLCSDN.js";import"./chunk-HBVGJIFA.js";import"./chunk-DMAP7O3B.js";import{a as _}from"./chunk-SEBF2BU2.js";import"./chunk-226KYS73.js";import"./chunk-36MGJEOV.js";import"./chunk-P4DBDHMG.js";import{a as b}from"./chunk-QH7CS6OP.js";import"./chunk-NMGI7OHJ.js";import{a as v}from"./chunk-6BZURQTQ.js";import"./chunk-R7DZLFCY.js";import{C as d,D as h}from"./chunk-7LRRDA6O.js";import{$ as C,Mb as u,Na as n,Oa as s,Wa as f,fb as l,jb as a,kb as c,lb as m,tb as p}from"./chunk-LJKVXSQR.js";var I=(()=>{class r{constructor(o,e){this.ngZone=o,this.toastrService=e,this.categories=[],this.filteredCategoria=[],this.columnas=["name","description"],this.encabezados=["Nombre","Descripci\xF3n"]}ngOnInit(){console.log("holi"),this.getPost()}getPost(){let{headers:o}=h();fetch(`${d.apiUrl}category/getAllActive`,{method:"GET",headers:o}).then(e=>e.json()).then(e=>{console.log(e.data),this.ngZone.run(()=>{this.categories=e.data.Category.slice(-10).reverse()})})}filterCategories(o){this.filteredCategoria=this.categories.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())),console.log(this.filteredCategoria)}cleanSearch(){this.filteredCategoria=[]}editCategory(o){alert(o.id)}deleteCategory(o){let{headers:e}=h();fetch(`${d.apiUrl}category/delete/${o.id}`,{method:"DELETE",headers:e}).then(t=>t.json()).then(t=>{console.log(t),this.ngZone.run(()=>{this.toastrService.success("Categor\xEDa eliminada con \xE9xito"),this.getPost()})}).catch(t=>{console.error(t),this.ngZone.run(()=>{this.toastrService.error("Error al eliminar la categor\xEDa","Error")})})}static{this.\u0275fac=function(e){return new(e||r)(s(f),s(b))}}static{this.\u0275cmp=C({type:r,selectors:[["app-gestion-categoria"]],standalone:!0,features:[u],decls:5,vars:8,consts:[["title","Categor\xEDa"],[1,"horizontal"],[3,"label","route"],["placeholder","Buscar por Nombre",3,"search","clean"],[3,"delete","items","columns","columnHeaders","showDelete","showEdit","showView"]],template:function(e,t){e&1&&(m(0,"app-h1",0),a(1,"div",1),m(2,"app-btn",2),a(3,"app-searchbar",3),p("search",function(i){return t.filterCategories(i)})("clean",function(){return t.cleanSearch()}),c()(),a(4,"app-table2",4),p("delete",function(i){return t.deleteCategory(i)}),c()),e&2&&(n(2),l("label","Crear Categor\xEDa")("route","/crearCategoria"),n(2),l("items",t.filteredCategoria.length>0?t.filteredCategoria:t.categories)("columns",t.columnas)("columnHeaders",t.encabezados)("showDelete",!0)("showEdit",!1)("showView",!1))},dependencies:[v,_,E,y],styles:[".horizontal[_ngcontent-%COMP%]{display:flex}"]})}}return r})();export{I as default};
