import{a as b,b as E}from"./chunk-YHSLCSDN.js";import"./chunk-HBVGJIFA.js";import"./chunk-DMAP7O3B.js";import{a as _}from"./chunk-SEBF2BU2.js";import"./chunk-226KYS73.js";import"./chunk-36MGJEOV.js";import"./chunk-P4DBDHMG.js";import{a as C}from"./chunk-6BZURQTQ.js";import"./chunk-R7DZLFCY.js";import{C as g,D as d}from"./chunk-7LRRDA6O.js";import{$ as h,Mb as P,Na as r,Oa as u,Wa as f,fb as s,jb as n,kb as p,lb as m,tb as c}from"./chunk-LJKVXSQR.js";var Z=(()=>{class a{constructor(o){this.ngZone=o,this.patologias=[],this.filteredPatologias=[],this.columnas=["name"],this.encabezados=["Nombre"]}ngOnInit(){this.getPatologias()}getPatologias(){let{headers:o}=d();fetch(`${g.apiUrl}pathology/getAll`,{method:"GET",headers:o}).then(e=>e.json()).then(e=>{if(e&&e.data&&e.data.pathologies&&Array.isArray(e.data.pathologies)){let i=e.data.pathologies.slice(-10);this.ngZone.run(()=>{this.patologias=i,this.filteredPatologias=this.patologias})}else console.error("La API no devolvi\xF3 un arreglo de patolog\xEDas")})}filterPatologias(o){this.filteredPatologias=this.patologias.filter(e=>e.name.toLowerCase().includes(o.toLowerCase()))}cleanSearch(){this.filteredPatologias=this.patologias}editPatologia(o){alert(o.name)}deletePatologia(o){let{headers:e}=d();fetch(`${g.apiUrl}pathology/delete/${o.id}`,{method:"DELETE",headers:e}).then(t=>{if(t.ok)return t.json();throw new Error(`Error ${t.status}: ${t.statusText}`)}).then(t=>{console.log(t),this.ngZone.run(()=>{this.getPatologias()})}).catch(t=>{console.error(t),this.ngZone.run(()=>{alert("Error al eliminar la patolog\xEDa")})})}static{this.\u0275fac=function(e){return new(e||a)(u(f))}}static{this.\u0275cmp=h({type:a,selectors:[["app-gestion-patologia"]],standalone:!0,features:[P],decls:5,vars:6,consts:[["title","Patolog\xEDas"],[1,"horizontal"],[3,"label","route"],["placeholder","Buscar por Nombre",3,"search","clean"],[3,"delete","items","columns","columnHeaders","showEdit"]],template:function(e,t){e&1&&(m(0,"app-h1",0),n(1,"div",1),m(2,"app-btn",2),n(3,"app-searchbar",3),c("search",function(l){return t.filterPatologias(l)})("clean",function(){return t.cleanSearch()}),p()(),n(4,"app-table2",4),c("delete",function(l){return t.deletePatologia(l)}),p()),e&2&&(r(2),s("label","Crear Patolog\xEDa")("route","/crearPatologia"),r(2),s("items",t.filteredPatologias)("columns",t.columnas)("columnHeaders",t.encabezados)("showEdit",!1))},dependencies:[C,_,b,E],styles:[".horizontal[_ngcontent-%COMP%]{display:flex}"]})}}return a})();export{Z as default};
