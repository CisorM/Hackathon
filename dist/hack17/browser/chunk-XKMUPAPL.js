import{b as M,d as S,e as v,f as x,g as w,h as F,o as E,r as P}from"./chunk-P4DBDHMG.js";import{a as W,b as l}from"./chunk-FYQRXYID.js";import{a as O}from"./chunk-QH7CS6OP.js";import"./chunk-NMGI7OHJ.js";import{a as T}from"./chunk-6BZURQTQ.js";import{c as _}from"./chunk-R7DZLFCY.js";import{C as N,D as k}from"./chunk-7LRRDA6O.js";import{$ as f,Eb as s,Ib as u,Jb as g,Kb as p,Mb as y,Na as c,Oa as d,Wa as h,jb as r,kb as n,lb as b,tb as C}from"./chunk-LJKVXSQR.js";var A=(()=>{class a{constructor(i,o,e){this.ngZone=i,this.toastrService=o,this.router=e,this.formSchema=l.object({nombre:l.string().min(1,{message:"El nombre de la comunidad es obligatorio."}),region:l.string().min(1,{message:"La regi\xF3n es obligatoria."})}),this.form={nombre:"",region:""}}createComunidad(){try{this.formSchema.parse(this.form)}catch(e){if(e instanceof W){e.errors.forEach(m=>{this.toastrService.error(`${m.message}`,"Alerta")});return}}let i={name:this.form.nombre,region:this.form.region},{headerPost:o}=k();fetch(`${N.apiUrl}community/create`,{method:"POST",headers:o,body:JSON.stringify(i)}).then(e=>e.json()).then(e=>{console.log(e),this.ngZone.run(()=>{this.toastrService.success("Comunidad creada con \xE9xito"),this.form={nombre:"",region:""},this.router.navigate(["/gestionComunidad"])})}).catch(e=>{console.error(e),this.ngZone.run(()=>{this.toastrService.error("Error al crear la comunidad","Error")})})}static{this.\u0275fac=function(o){return new(o||a)(d(h),d(O),d(_))}}static{this.\u0275cmp=f({type:a,selectors:[["app-form-comunidad"]],standalone:!0,features:[y],decls:13,vars:2,consts:[["title","Crear Comunidad"],[1,"container"],[1,"form-group"],[1,"label"],["type","text","name","nombre","placeholder","Ingrese el nombre de la comunidad","required","",3,"ngModelChange","ngModel"],["type","text","name","region","placeholder","Ingrese la regi\xF3n de la comunidad","required","",3,"ngModelChange","ngModel"],["type","button",3,"click"]],template:function(o,e){o&1&&(b(0,"app-h1",0),r(1,"div",1)(2,"form")(3,"div",2)(4,"label",3),s(5,"Nombre:"),n(),r(6,"input",4),p("ngModelChange",function(t){return g(e.form.nombre,t)||(e.form.nombre=t),t}),n()(),r(7,"div",2)(8,"label",3),s(9,"Regi\xF3n:"),n(),r(10,"input",5),p("ngModelChange",function(t){return g(e.form.region,t)||(e.form.region=t),t}),n()(),r(11,"button",6),C("click",function(){return e.createComunidad()}),s(12,"Crear Comunidad"),n()()()),o&2&&(c(6),u("ngModel",e.form.nombre),c(4),u("ngModel",e.form.region))},dependencies:[P,F,M,S,v,E,w,x,T],styles:[".container[_ngcontent-%COMP%]{width:50%;margin:40px auto;padding:20px;border-radius:14px;box-shadow:0 0 10px #0000001a;background-color:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.label[_ngcontent-%COMP%]{font-size:medium;margin-bottom:10px;display:block}input[type=text][_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid #ccc;border-radius:5px;font-size:medium}button[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#1759b1;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:medium}button[type=button][_ngcontent-%COMP%]:hover{background-color:#0b3a77}"]})}}return a})();export{A as default};
