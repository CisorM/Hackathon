import"./chunk-BYXBJQAS.js";import{a as b,b as E}from"./chunk-YHSLCSDN.js";import"./chunk-HBVGJIFA.js";import"./chunk-DMAP7O3B.js";import{a as C}from"./chunk-SEBF2BU2.js";import"./chunk-226KYS73.js";import"./chunk-36MGJEOV.js";import"./chunk-P4DBDHMG.js";import{a as g}from"./chunk-6BZURQTQ.js";import"./chunk-R7DZLFCY.js";import{C as l,D as p}from"./chunk-7LRRDA6O.js";import{$ as f,Mb as _,Na as r,Oa as u,Wa as M,fb as s,jb as o,kb as m,lb as d,tb as c}from"./chunk-LJKVXSQR.js";var H=(()=>{class a{constructor(n){this.ngZone=n,this.medicamentos=[],this.filteredMedicamentos=[],this.columnas=["name","quantity"],this.encabezados=["Nombre","Cantidad"]}ngOnInit(){this.getMedicamentos()}getMedicamentos(){let{headers:n}=p();fetch(`${l.apiUrl}medication/getAll`,{method:"GET",headers:n}).then(e=>e.json()).then(e=>{e&&e.data&&e.data.Medication&&Array.isArray(e.data.Medication)?this.ngZone.run(()=>{this.medicamentos=e.data.Medication.slice(0,10),this.filteredMedicamentos=this.medicamentos}):console.error("La API no devolvi\xF3 un arreglo de medicamentos")})}filterMedicamentos(n){this.filteredMedicamentos=this.medicamentos.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))}cleanSearch(){this.filteredMedicamentos=this.medicamentos}editMedicamento(n){alert(n.name)}deleteMedicamento(n){let{headers:e}=p();fetch(`${l.apiUrl}medication/delete/${n.id}`,{method:"DELETE",headers:e}).then(t=>{if(t.ok)return t.json();throw new Error(`Error ${t.status}: ${t.statusText}`)}).then(t=>{console.log(t),this.ngZone.run(()=>{this.getMedicamentos()})}).catch(t=>{console.error(t),this.ngZone.run(()=>{alert("Error al eliminar el medicamento")})})}static{this.\u0275fac=function(e){return new(e||a)(u(M))}}static{this.\u0275cmp=f({type:a,selectors:[["app-medicamentos"]],standalone:!0,features:[_],decls:5,vars:6,consts:[["title","Medicamentos"],[1,"horizontal"],[3,"label","route"],["placeholder","Buscar por Nombre",3,"search","clean"],[3,"delete","items","columns","columnHeaders","showEdit"]],template:function(e,t){e&1&&(d(0,"app-h1",0),o(1,"div",1),d(2,"app-btn",2),o(3,"app-searchbar",3),c("search",function(i){return t.filterMedicamentos(i)})("clean",function(){return t.cleanSearch()}),m()(),o(4,"app-table2",4),c("delete",function(i){return t.deleteMedicamento(i)}),m()),e&2&&(r(2),s("label","Crear Medicamento")("route","/crearMedicamento"),r(2),s("items",t.filteredMedicamentos)("columns",t.columnas)("columnHeaders",t.encabezados)("showEdit",!1))},dependencies:[g,C,b,E],styles:[".horizontal[_ngcontent-%COMP%]{display:flex}"]})}}return a})();export{H as default};
