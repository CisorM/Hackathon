import"./chunk-BYXBJQAS.js";import{a as v,b as E}from"./chunk-YHSLCSDN.js";import"./chunk-HBVGJIFA.js";import"./chunk-DMAP7O3B.js";import"./chunk-SEBF2BU2.js";import"./chunk-226KYS73.js";import"./chunk-36MGJEOV.js";import"./chunk-P4DBDHMG.js";import{a as C}from"./chunk-6BZURQTQ.js";import{c as g}from"./chunk-R7DZLFCY.js";import{C as c,D as p}from"./chunk-7LRRDA6O.js";import{$ as m,Mb as D,Na as h,Oa as r,Wa as f,fb as u,jb as s,kb as l,lb as _,tb as d}from"./chunk-LJKVXSQR.js";var I=(()=>{class i{constructor(n,t){this.ngZone=n,this.router=t,this.donantes=[],this.filteredDonantes=[],this.columnas=["razon_social","indentification_type","identification","is_fundation"],this.encabezados=["Raz\xF3n Social","Tipo de Identificaci\xF3n","C\xE9dula","Es Fundaci\xF3n"]}ngOnInit(){this.getDonantes()}getDonantes(){let{headers:n}=p();fetch(`${c.apiUrl}charity/getAllActive`,{method:"GET",headers:n}).then(t=>t.json()).then(t=>{this.ngZone.run(()=>{this.donantes=t.data.Charity,this.filteredDonantes=this.donantes})})}filterDonantes(n){this.filteredDonantes=this.donantes.filter(t=>t.identification.toString().includes(n))}cleanSearch(){this.filteredDonantes=this.donantes}editDonante(n){alert(n.razon_social)}deleteDonante(n){let{headers:t}=p();fetch(`${c.apiUrl}charity/delete/${n.id}`,{method:"DELETE",headers:t}).then(e=>{if(e.ok)return e.json();throw new Error(`Error ${e.status}: ${e.statusText}`)}).then(e=>{console.log(e),this.ngZone.run(()=>{this.getDonantes()})}).catch(e=>{console.error(e),this.ngZone.run(()=>{alert("Error al eliminar el donante")})})}viewDonante(n){this.router.navigate(["perfilDonador/",n.id])}static{this.\u0275fac=function(t){return new(t||i)(r(f),r(g))}}static{this.\u0275cmp=m({type:i,selectors:[["app-gestion-donante"]],standalone:!0,features:[D],decls:4,vars:4,consts:[["title","Donantes"],[1,"horizontal"],["placeholder","Buscar por Rif",3,"search","clean"],[3,"delete","view","items","columns","columnHeaders","showEdit"]],template:function(t,e){t&1&&(_(0,"app-h1",0),s(1,"div",1)(2,"app-searchbar",2),d("search",function(o){return e.filterDonantes(o)})("clean",function(){return e.cleanSearch()}),l()(),s(3,"app-table2",3),d("delete",function(o){return e.deleteDonante(o)})("view",function(o){return e.viewDonante(o)}),l()),t&2&&(h(3),u("items",e.filteredDonantes)("columns",e.columnas)("columnHeaders",e.encabezados)("showEdit",!1))},dependencies:[C,E,v],styles:[".horizontal[_ngcontent-%COMP%]{display:flex}"]})}}return i})();export{I as default};
