import"./chunk-BYXBJQAS.js";import{a as C,b as w}from"./chunk-YHSLCSDN.js";import"./chunk-HBVGJIFA.js";import"./chunk-DMAP7O3B.js";import"./chunk-SEBF2BU2.js";import"./chunk-226KYS73.js";import"./chunk-36MGJEOV.js";import"./chunk-P4DBDHMG.js";import{a as g}from"./chunk-6BZURQTQ.js";import"./chunk-R7DZLFCY.js";import{C as _,D as b}from"./chunk-7LRRDA6O.js";import{$ as l,Mb as D,Na as m,Oa as h,Wa as p,fb as f,jb as a,kb as r,lb as u,tb as c}from"./chunk-LJKVXSQR.js";var P=(()=>{class i{constructor(t){this.ngZone=t,this.desechos=[],this.filteredDesechos=[],this.columnas=["nombre","cantidadDesechada","razon"],this.encabezados=["Nombre","Cantidad Desechada","Raz\xF3n"]}ngOnInit(){this.getPost()}getPost(){let{headers:t}=b();fetch(`${_.apiUrl}medication_disposal/getAll`,{method:"GET",headers:t}).then(o=>o.json()).then(o=>{let n=o.data.MedicationDisposal,s=[];n.forEach(e=>{let E=e.medication_id,d=e.medication;d&&s.push({nombre:d.name,cantidadDesechada:e.quantity,razon:e.reason.length>150?e.reason.substring(0,150)+"...":e.reason})}),this.ngZone.run(()=>{this.desechos=s.slice(-10),this.filteredDesechos=this.desechos})})}filterDesechos(t){this.filteredDesechos=this.desechos.filter(o=>o.nombre.toLowerCase().includes(t.toLowerCase()))}cleanSearch(){this.filteredDesechos=this.desechos}deleteDesecho(t){alert(`Eliminar desecho con ID: ${t.id}`)}editDesecho(t){alert(`Editar desecho con ID: ${t.id}`)}static{this.\u0275fac=function(o){return new(o||i)(h(p))}}static{this.\u0275cmp=l({type:i,selectors:[["app-gestion-desecho"]],standalone:!0,features:[D],decls:4,vars:5,consts:[["title","Desecho de Medicamentos"],[1,"horizontal"],["placeholder","Buscar por Nombre",3,"search","clean"],[3,"edit","delete","items","columns","columnHeaders","showDelete","showEdit"]],template:function(o,n){o&1&&(u(0,"app-h1",0),a(1,"div",1)(2,"app-searchbar",2),c("search",function(e){return n.filterDesechos(e)})("clean",function(){return n.cleanSearch()}),r()(),a(3,"app-table2",3),c("edit",function(e){return n.editDesecho(e)})("delete",function(e){return n.deleteDesecho(e)}),r()),o&2&&(m(3),f("items",n.filteredDesechos)("columns",n.columnas)("columnHeaders",n.encabezados)("showDelete",!0)("showEdit",!0))},dependencies:[g,w,C],styles:[".container[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:40px auto;padding:20px;border-radius:14px;box-shadow:0 0 10px #0000001a;background-color:#fff}"]})}}return i})();export{P as default};
