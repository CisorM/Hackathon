import"./chunk-BYXBJQAS.js";import{a as E,b as w}from"./chunk-YHSLCSDN.js";import"./chunk-HBVGJIFA.js";import"./chunk-DMAP7O3B.js";import{a as _}from"./chunk-SEBF2BU2.js";import"./chunk-226KYS73.js";import"./chunk-36MGJEOV.js";import"./chunk-P4DBDHMG.js";import{a as b}from"./chunk-6BZURQTQ.js";import"./chunk-R7DZLFCY.js";import{C as c,D as u}from"./chunk-7LRRDA6O.js";import{$ as h,Mb as g,Na as r,Oa as C,Wa as f,fb as d,jb as i,kb as s,lb as m,tb as l}from"./chunk-LJKVXSQR.js";var H=(()=>{class o{constructor(n){this.ngZone=n,this.comunidades=[],this.filteredComunidad=[],this.columnas=["name","region"],this.encabezados=["Nombre","Regi\xF3n"]}ngOnInit(){this.getPost()}getPost(){let{headers:n}=u();fetch(`${c.apiUrl}community/getAll`,{method:"GET",headers:n}).then(t=>t.json()).then(t=>{this.ngZone.run(()=>{this.comunidades=t.data.Community,this.filteredComunidad=this.comunidades.slice(-10).reverse()}),console.log(t)})}filterComunidades(n){this.filteredComunidad=this.comunidades.filter(t=>t.name.toLowerCase().includes(n.toLowerCase()))}cleanSearch(){this.filteredComunidad=this.comunidades}deleteComunidad(n){let{headers:t}=u();fetch(`${c.apiUrl}community/delete/${n.id}`,{method:"DELETE",headers:t}).then(e=>{if(e.ok)return e.json();throw new Error(`Error ${e.status}: ${e.statusText}`)}).then(e=>{console.log(e),this.ngZone.run(()=>{this.getPost()})}).catch(e=>{console.error(e),this.ngZone.run(()=>{alert("Error al eliminar la comunidad")})})}editComunidad(n){alert(`Editar comunidad con ID: ${n.id}`)}static{this.\u0275fac=function(t){return new(t||o)(C(f))}}static{this.\u0275cmp=h({type:o,selectors:[["app-gestion-comunidad"]],standalone:!0,features:[g],decls:5,vars:7,consts:[["title","Comunidades"],[1,"horizontal"],[3,"label","route"],["placeholder","Buscar por Nombre",3,"search","clean"],[3,"delete","items","columns","columnHeaders","showEdit","showView"]],template:function(t,e){t&1&&(m(0,"app-h1",0),i(1,"div",1),m(2,"app-btn",2),i(3,"app-searchbar",3),l("search",function(a){return e.filterComunidades(a)})("clean",function(){return e.cleanSearch()}),s()(),i(4,"app-table2",4),l("delete",function(a){return e.deleteComunidad(a)}),s()),t&2&&(r(2),d("label","Crear Comunidad")("route","/crearComunidad"),r(2),d("items",e.filteredComunidad)("columns",e.columnas)("columnHeaders",e.encabezados)("showEdit",!1)("showView",!1))},dependencies:[b,_,w,E],styles:[".horizontal[_ngcontent-%COMP%]{display:flex}"]})}}return o})();export{H as default};
